{"remainingRequest":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\thread-loader\\dist\\cjs.js!C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\src\\components\\Cart.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\src\\components\\Cart.vue","mtime":1652689403719},{"path":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652478977922},{"path":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1652478974505},{"path":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1652478979230},{"path":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1652478977922},{"path":"C:\\Users\\Mvideo\\Desktop\\pcconf\\frontend\\node_modules\\vue-loader\\lib\\index.js","mtime":1652478976826}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucmVkdWNlLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ0NhcnQnLAogIHByb3BzOiBbJ3Nob3dTbmFjayddLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBkaWFsb2c6IGZhbHNlLAogICAgICB2YWxpZDogdHJ1ZSwKICAgICAgc25hY2tiYXI6IGZhbHNlLAogICAgICB1c2VyOiB7CiAgICAgICAgZmlyc3ROYW1lOiAnJywKICAgICAgICBzZWNvbmROYW1lOiAnJywKICAgICAgICBwaG9uZTogJycsCiAgICAgICAgZW1haWw6ICcnLAogICAgICAgIGNvbW1lbnQ6ICcnLAogICAgICAgIHByb21vOiAnJwogICAgICB9LAogICAgICBuYW1lUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ9CX0LDQv9C+0LvQvdC40YLQtSDQv9C+0LvQtSc7CiAgICAgIH0sIGZ1bmN0aW9uICh2KSB7CiAgICAgICAgcmV0dXJuIHYgJiYgdi5sZW5ndGggPiAyIHx8ICfQmNC80Y8g0LTQvtC70LbQvdC+INGB0L7QtNC10YDQttCw0YLRjCDQsdC+0LvQtdC1IDIg0YHQuNC80LLQvtC70L7Qsic7CiAgICAgIH1dLAogICAgICBlbWFpbFJ1bGVzOiBbZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gISF2IHx8ICfQktCy0LXQtNC40YLQtSDQsNC00YDQtdGBJzsKICAgICAgfSwgZnVuY3Rpb24gKHYpIHsKICAgICAgICByZXR1cm4gLy4rQC4rXC4uKy8udGVzdCh2KSB8fCAn0J3QtdCy0LXRgNC90YvQuSDQsNC00YDQtdGBJzsKICAgICAgfV0sCiAgICAgIHBob25lUnVsZXM6IFtmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiAhIXYgfHwgJ9CS0LLQtdC00LjRgtC1INC90L7QvNC10YAnOwogICAgICB9LCBmdW5jdGlvbiAodikgewogICAgICAgIHJldHVybiB2ICYmIHYubGVuZ3RoID09PSA5IHx8ICfQndC10LLQtdGA0L3Ri9C5INC90L7QvNC10YAnOwogICAgICB9XQogICAgfTsKICB9LAogIGNvbXB1dGVkOiB7CiAgICBpdGVtczogZnVuY3Rpb24gaXRlbXMoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5nZXR0ZXJzLmdldENhcnQ7CiAgICB9LAogICAgdG90YWxQcmljZTogZnVuY3Rpb24gdG90YWxQcmljZSgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXRlbXMucmVkdWNlKGZ1bmN0aW9uIChzdW0sIGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXRlbS5xdWFudGl0eSAqIGl0ZW0ucHJvZHVjdC5wcmljZSArIHN1bTsKICAgICAgfSwgMCk7CiAgICB9LAogICAgcHJvbW90aW9uOiBmdW5jdGlvbiBwcm9tb3Rpb24oKSB7CiAgICAgIGlmICh0aGlzLnVzZXIucHJvbW8gPT09ICcxMTExJykgewogICAgICAgIHJldHVybiA1MDA7CiAgICAgIH0KCiAgICAgIHJldHVybiAwOwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgdmFsaWRhdGU6IGZ1bmN0aW9uIHZhbGlkYXRlKCkgewogICAgICB0aGlzLiRyZWZzLmZvcm0udmFsaWRhdGUoKTsKICAgIH0sCiAgICByZXNldDogZnVuY3Rpb24gcmVzZXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybS5yZXNldCgpOwogICAgfSwKICAgIGNoZWNrb3V0OiBmdW5jdGlvbiBjaGVja291dCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMudmFsaWRhdGUoKTsKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIGlmIChfdGhpcy52YWxpZCkgewogICAgICAgICAgX3RoaXMuc2F2ZVRvTG9jYWxzdG9yYWdlKCk7CgogICAgICAgICAgX3RoaXMuY2xlYXJDYXJ0KCk7CgogICAgICAgICAgX3RoaXMucmVzZXQoKTsKCiAgICAgICAgICBfdGhpcy5zaG93U25hY2soKTsKCiAgICAgICAgICBfdGhpcy5kaWFsb2cgPSBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIGRlbGV0ZUl0ZW06IGZ1bmN0aW9uIGRlbGV0ZUl0ZW0oaW5kZXgpIHsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goJ2RlbGV0ZVByb2R1Y3QnLCBpbmRleCk7CiAgICB9LAogICAgc2F2ZVRvTG9jYWxzdG9yYWdlOiBmdW5jdGlvbiBzYXZlVG9Mb2NhbHN0b3JhZ2UoKSB7CiAgICAgIHZhciBvcmRlcnMgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKCdvcmRlcnMnKSkgfHwgW107CiAgICAgIHZhciBvcmRlciA9IHsKICAgICAgICBpdGVtczogdGhpcy5pdGVtcywKICAgICAgICBwcmljZTogdGhpcy50b3RhbFByaWNlLAogICAgICAgIHBheTogdGhpcy50b3RhbFByaWNlIC0gdGhpcy5wcm9tb3Rpb24sCiAgICAgICAgdXNlcjogT2JqZWN0LmFzc2lnbih7fSwgdGhpcy51c2VyKSwKICAgICAgICBkYXRlOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXQogICAgICB9OwogICAgICBvcmRlcnMucHVzaChvcmRlcik7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCdzZXRPcmRlcicsIG9yZGVyKTsKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ29yZGVycycsIEpTT04uc3RyaW5naWZ5KG9yZGVycykpOwogICAgfSwKICAgIGNsZWFyQ2FydDogZnVuY3Rpb24gY2xlYXJDYXJ0KCkgewogICAgICB0aGlzLiRzdG9yZS5kaXNwYXRjaCgnY2xlYXJDYXJ0Jyk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["Cart.vue"],"names":[],"mappings":"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","sourcesContent":["<script>\nexport default {\n  name: 'Cart',\n  props: ['showSnack'],\n  data () {\n    return {\n      dialog: false,\n      valid: true,\n      snackbar: false,\n      user: {\n        firstName: '',\n        secondName: '',\n        phone: '',\n        email: '',\n        comment: '',\n        promo: ''\n      },\n      nameRules: [\n        v => !!v || 'Заполните поле',\n        v => (v && v.length > 2) || 'Имя должно содержать более 2 символов'\n      ],\n      emailRules: [\n        v => !!v || 'Введите адрес',\n        v => /.+@.+\\..+/.test(v) || 'Неверный адрес'\n      ],\n      phoneRules: [\n        v => !!v || 'Введите номер',\n        v => (v && v.length === 9) || 'Неверный номер'\n      ]\n    }\n  },\n  computed: {\n    items () {\n      return this.$store.getters.getCart\n    },\n    totalPrice () {\n      return this.items.reduce((sum, item) => (item.quantity * item.product.price) + sum, 0)\n    },\n    promotion () {\n      if (this.user.promo === '1111') {\n        return 500\n      }\n      return 0\n    }\n  },\n  methods: {\n    validate () {\n      this.$refs.form.validate()\n    },\n    reset () {\n      this.$refs.form.reset()\n    },\n    checkout () {\n      this.validate()\n      this.$nextTick(() => {\n        if (this.valid) {\n          this.saveToLocalstorage()\n          this.clearCart()\n          this.reset()\n          this.showSnack()\n          this.dialog = false\n        }\n      })\n    },\n    deleteItem (index) {\n      this.$store.dispatch('deleteProduct', index)\n    },\n    saveToLocalstorage () {\n      const orders = JSON.parse(localStorage.getItem('orders')) || []\n\n      const order = {\n        items: this.items,\n        price: this.totalPrice,\n        pay: this.totalPrice - this.promotion,\n        user: Object.assign({}, this.user),\n        date: new Date().toISOString().split('T')[0]\n      }\n\n      orders.push(order)\n\n      this.$store.dispatch('setOrder', order)\n\n      localStorage.setItem('orders', JSON.stringify(orders))\n    },\n    clearCart () {\n      this.$store.dispatch('clearCart')\n    }\n  }\n}\n</script>\n\n<template>\n<div>\n  <v-menu\n    left\n    bottom\n    :close-on-content-click=\"false\"\n    offset-y\n  >\n    <template v-slot:activator=\"{ on }\">\n      <v-btn class=\"ml-6\" icon v-on=\"on\">\n        <v-badge\n          color=\"red\"\n          :content=\"items.length\"\n          :value=\"items.length\"\n          overlap\n        >\n          <v-icon large>mdi-cart</v-icon>\n        </v-badge>\n      </v-btn>\n    </template>\n    <v-card v-if=\"items.length\" dark>\n      <v-list subheader>\n        <v-subheader>Корзина</v-subheader>\n\n        <v-list-item\n          v-for=\"(item, index) in items\"\n          :key=\"index\"\n          @click=\"()=>{}\"\n        >\n          <v-list-item-avatar>\n            <v-img\n              :src=\"require('../' + item.product.image)\"\n              :contain=\"true\"\n            ></v-img>\n          </v-list-item-avatar>\n\n          <v-list-item-content>\n            <v-list-item-title v-text=\"item.product.name\"></v-list-item-title>\n          </v-list-item-content>\n\n          <v-list-item-action class=\"ml-7\">\n            <div class=\"cart-price\">\n              <div class=\"text-input\">\n                <v-text-field v-model=\"item.quantity\" hide-details type=\"number\"></v-text-field>\n              </div>\n              <div> x {{item.product.price}} ₽</div>\n              <div>\n                <v-btn class=\"ml-3\" icon @click=\"deleteItem(index)\">\n                  <v-icon>mdi-close-circle</v-icon>\n                </v-btn>\n              </div>\n            </div>\n          </v-list-item-action>\n        </v-list-item>\n      </v-list>\n      <v-divider></v-divider>\n      <v-card-text class=\"d-flex\">\n        <span class=\"subtitle-1 font-regular mt-1\"> Итого: {{totalPrice}} ₽</span>\n        <v-spacer></v-spacer>\n        <v-btn color=\"#d76e00\" class=\"text-capitalize\" @click=\"dialog = true\" dark>Купить</v-btn>\n      </v-card-text>\n    </v-card>\n    <v-card v-else dark>\n      <v-card-text>\n        Корзина пуста!\n      </v-card-text>\n    </v-card>\n  </v-menu>\n  <v-dialog v-model=\"dialog\" max-width=\"600px\">\n    <v-card dark>\n      <v-card-title>\n        <span class=\"headline\">Оформление заказа</span>\n      </v-card-title>\n      <v-card-text>\n        <v-container>\n          <v-form\n            ref=\"form\"\n            v-model=\"valid\"\n          >\n          <v-row>\n            <v-col cols=\"6\" class=\"pa-1\">\n              <v-text-field label=\"Имя*\" :rules=\"nameRules\" v-model=\"user.firstName\" required></v-text-field>\n            </v-col>\n            <v-col cols=\"6\" class=\"pa-1\">\n              <v-text-field label=\"Фамилия*\" :rules=\"nameRules\" v-model=\"user.secondName\" required></v-text-field>\n            </v-col>\n            <v-col cols=\"6\" class=\"pa-1\">\n              <v-text-field\n                label=\"Телефон*\"\n                persistent-hint\n                :rules=\"phoneRules\"\n                required\n                v-model=\"user.phone\"\n              ></v-text-field>\n            </v-col>\n            <v-col cols=\"6\" class=\"pa-1\">\n              <v-text-field label=\"E-mail*\" :rules=\"emailRules\" v-model=\"user.email\" required></v-text-field>\n            </v-col>\n            <v-col cols=\"12\" class=\"pa-1\">\n              <v-textarea label=\"Комментарий\" v-model=\"user.comment\"></v-textarea>\n            </v-col>\n            <v-col cols=\"12\" class=\"pa-1\">\n              <v-text-field label=\"Промокод\" v-model=\"user.promo\"></v-text-field>\n            </v-col>\n          </v-row>\n          </v-form>\n        </v-container>\n\n        <v-row>\n          <v-col cols=\"12\" class=\"subtitle-1 py-0 text-right font-weight-black\">Итого: {{totalPrice}} ₽</v-col>\n          <v-col cols=\"12\" class=\"subtitle-1 py-0 text-right font-weight-black\">Скидка: {{promotion}} ₽</v-col>\n          <v-col cols=\"12\" class=\"subtitle-1 py-0 text-right font-weight-black\">К оплате: {{totalPrice - promotion}} ₽</v-col>\n        </v-row>\n      </v-card-text>\n      <v-card-actions>\n        <small class=\"caption ml-3\">*обязательное поле</small>\n        <v-spacer></v-spacer>\n        <v-btn dark color=\"#d76e00\" @click=\"dialog = false\">Закрыть</v-btn>\n        <v-btn dark color=\"#d76e00\"@click=\"checkout()\">Оплатить</v-btn>\n      </v-card-actions>\n    </v-card>\n  </v-dialog>\n</div>\n</template>\n\n<style scoped>\n  .text-input {\n    width: 40px;\n  }\n\n  .cart-price {\n    display: grid;\n    grid-template-columns: 1fr 1fr 1fr;\n  }\n\n  .cart-price > div {\n    align-self: center;\n  }\n\n  .cart-price > div:last-child {\n    justify-self: end;\n  }\n</style>\n"],"sourceRoot":"src/components"}]}